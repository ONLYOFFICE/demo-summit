(()=>{"use strict";var e={d:(t,l)=>{for(var o in l)e.o(l,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:l[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{V:()=>p,y:()=>h});const t=window.React,l=window.wp.blocks,o=JSON.parse('{"name":"onlyoffice-docspace-wordpress/onlyoffice-docspace"}'),n=window.wp.blockEditor,a=window.wp.components,r=window.wp.element,c=window.wp.i18n,i=(0,t.createElement)("svg",{width:"96",height:"96",viewBox:"0 0 96 96",fill:"none",xmlns:"https://www.w3.org/2000/svg"},(0,t.createElement)("rect",{x:"2",y:"2",width:"92",height:"92",rx:"10",stroke:"black","stroke-opacity":"0.17","stroke-width":"4"}),(0,t.createElement)("rect",{x:"18",y:"18",width:"25",height:"25",rx:"3",fill:"white"}),(0,t.createElement)("rect",{x:"18",y:"54",width:"25",height:"25",rx:"3",fill:"white"}),(0,t.createElement)("rect",{x:"53",y:"54",width:"25",height:"25",rx:"3",fill:"white"}),(0,t.createElement)("rect",{x:"53",y:"18",width:"25",height:"25",rx:"3",fill:"white"})),s=(0,t.createElement)("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"https://www.w3.org/2000/svg"},(0,t.createElement)("path",{d:"M10.5 1H57.5L86.5 30V95H10.5V1Z",fill:"white"}),(0,t.createElement)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.5 95H86.5V30L57.5 1H10.5V95ZM57.5 0H9.5V96H87.5V30L57.5 0Z",fill:"url(#paint0_linear_3527_59860)"}),(0,t.createElement)("path",{d:"M33.5 67H39.5V73H33.5V67Z",fill:"#BFBFBF"}),(0,t.createElement)("path",{d:"M45.5 67H51.5V73H45.5V67Z",fill:"#BFBFBF"}),(0,t.createElement)("path",{d:"M63.5 67H57.5V73H63.5V67Z",fill:"#BFBFBF"}),(0,t.createElement)("path",{opacity:"0.3",d:"M56.5 30V1H57.5V29H86.5L87.5 30H56.5Z",fill:"black"}),(0,t.createElement)("defs",null,(0,t.createElement)("linearGradient",{id:"paint0_linear_3527_59860",x1:"48.5",y1:"94.25",x2:"48.5",y2:"1.21299e-06",gradientUnits:"userSpaceOnUse"},(0,t.createElement)("stop",{"stop-color":"#A8A8A8"}),(0,t.createElement)("stop",{offset:"1","stop-color":"#DADADA"})))),d=(0,t.createElement)("svg",{width:"18",height:"17",viewBox:"0 0 18 17",fill:"none",xmlns:"https://www.w3.org/2000/svg"},(0,t.createElement)("path",{d:"M8.5 10.4197V4.58032C8.5 4.22147 8.69229 3.89012 9.00386 3.71208L14.0039 0.854937C14.6705 0.47399 15.5 0.955357 15.5 1.72318V13.2768C15.5 14.0446 14.6705 14.526 14.0039 14.1451L9.00386 11.2879C8.69229 11.1099 8.5 10.7785 8.5 10.4197Z",fill:"#333333"}),(0,t.createElement)("rect",{x:"1.5",y:"4",width:"6",height:"7",rx:"1",fill:"#333333"}),(0,t.createElement)("path",{d:"M4.38184 12L5.60542 14.4472C5.85241 14.9411 6.45308 15.1414 6.94706 14.8944C7.44104 14.6474 7.64126 14.0467 7.39427 13.5527L6.6179 12H4.38184Z",fill:"#333333"})),m=(0,t.createElement)("svg",{width:"18",height:"17",viewBox:"0 0 18 17",fill:"none",xmlns:"https://www.w3.org/2000/svg"},(0,t.createElement)("path",{d:"M8.5 10.4197V4.58032C8.5 4.22147 8.69229 3.89012 9.00386 3.71208L14.0039 0.854937C14.6705 0.47399 15.5 0.955357 15.5 1.72318V13.2768C15.5 14.0446 14.6705 14.526 14.0039 14.1451L9.00386 11.2879C8.69229 11.1099 8.5 10.7785 8.5 10.4197Z",fill:"white"}),(0,t.createElement)("rect",{x:"1.5",y:"4",width:"6",height:"7",rx:"1",fill:"white"}),(0,t.createElement)("path",{d:"M4.38184 12L5.60542 14.4472C5.85241 14.9411 6.45308 15.1414 6.94706 14.8944C7.44104 14.6474 7.64126 14.0467 7.39427 13.5527L6.6179 12H4.38184Z",fill:"white"})),p={height:"500px",background:"#a2ccef"},h=(0,t.createElement)("svg",{width:"66",height:"60",viewBox:"0 0 66 60",fill:"black",xmlns:"https://www.w3.org/2000/svg"},(0,t.createElement)("path",{opacity:"0.5",fillRule:"evenodd",clipRule:"evenodd",d:"M28.9406 59.2644L2.20792 46.9066C-0.0693069 45.8277 -0.0693069 44.1604 2.20792 43.1796L11.5148 38.8642L28.8416 46.9066C31.1188 47.9854 34.7822 47.9854 36.9604 46.9066L54.2871 38.8642L63.5941 43.1796C65.8713 44.2585 65.8713 45.9258 63.5941 46.9066L36.8614 59.2644C34.7822 60.2452 31.1188 60.2452 28.9406 59.2644Z",fill:"black"}),(0,t.createElement)("path",{opacity:"0.75",fillRule:"evenodd",clipRule:"evenodd",d:"M28.9406 44.0606L2.20792 31.7028C-0.069307 30.6239 -0.069307 28.9566 2.20792 27.9758L11.3168 23.7584L28.9406 31.8989C31.2178 32.9778 34.8812 32.9778 37.0594 31.8989L54.6832 23.7584L63.7921 27.9758C66.0693 29.0547 66.0693 30.722 63.7921 31.7028L37.0594 44.0606C34.7822 45.1395 31.1188 45.1395 28.9406 44.0606Z",fill:"black"}),(0,t.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28.9406 29.2518L2.20792 16.8939C-0.069307 15.8151 -0.069307 14.1478 2.20792 13.167L28.9406 0.809144C31.2178 -0.269715 34.8812 -0.269715 37.0594 0.809144L63.7921 13.167C66.0693 14.2458 66.0693 15.9132 63.7921 16.8939L37.0594 29.2518C34.7822 30.2325 31.1188 30.2325 28.9406 29.2518Z",fill:"black"})),{name:f}=o;(0,l.registerBlockType)(f,{icon:h,edit:({attributes:e,setAttributes:l})=>{const[o,f]=(0,r.useState)(!1),[g,u]=(0,r.useState)({}),[w,y]=(0,r.useState)(!1),E=[{label:(0,c.__)("Light","onlyoffice-docspace-plugin"),value:"Base"},{label:(0,c.__)("Dark","onlyoffice-docspace-plugin"),value:"Dark"}];(0,r.useEffect)((()=>{o&&wp.oodsp.initLoginManager("oodsp-selector-frame",(function(){DocSpace.SDK.initFrame(g)}))}),[o]);const _=t=>{Object.keys(e).forEach((t=>delete e[t]));const o=t[0].requestTokens,n=o?o[0].requestToken:null;l({roomId:t[0].id,name:t[0].label,icon:t[0].icon}),n&&l({requestToken:n}),DocSpace.SDK.frames["oodsp-selector-frame"].destroyFrame(),f(!1)},v=t=>{Object.keys(e).forEach((t=>delete e[t]));const o=t.requestTokens,n=o?o[0].requestToken:null;l({fileId:t.id,name:t.title,icon:t.icon}),n&&l({requestToken:n}),DocSpace.SDK.frames["oodsp-selector-frame"].destroyFrame(),f(!1)},C=()=>{DocSpace.SDK.frames["oodsp-selector-frame"].destroyFrame(),f(!1)},k=e=>{const t=e.target.dataset.mode||null;var l=null;switch(t){case"room-selector":l=_;break;case"file-selector":l=v}u({frameId:"oodsp-selector-frame",title:e.target.dataset.title||"",width:"100%",height:"100%",mode:t,selectorType:"roomsOnly",locale:_oodsp.locale,events:{onSelectCallback:l,onCloseCallback:C}}),f(!0)};e.hasOwnProperty("width")&&e.width.length>0&&(p.width=e.width),e.hasOwnProperty("height")&&e.height.length>0&&(p.height=e.height);let b=!0;"full"===e.align&&(delete p.width,b=!1);let L=!e.roomId&&!e.fileId,x=!L&&e.roomId?"room":"file",S=!L&&e.roomId?(0,c.__)("Room","onlyoffice-docspace-plugin"):(0,c.__)("File","onlyoffice-docspace-plugin"),B=(e=>{switch(e){case"room":return i;case"file":return s;default:return null}})(x),F=e.hasOwnProperty("requestToken")&&e.requestToken.length>0?(e=>{switch(e){case"room":return d;case"file":return m;default:return null}})(x):"";const D=L?(0,n.useBlockProps)({style:null}):(0,n.useBlockProps)({style:p});return(0,t.createElement)("div",{...D},L?(0,t.createElement)(t.Fragment,null,(0,t.createElement)(a.Placeholder,{icon:h,label:"ONLYOFFICE DocSpace",instructions:(0,c.__)("Pick room or media file from your DocSpace","onlyoffice-docspace-plugin")},(0,t.createElement)(a.Button,{variant:"primary","data-title":(0,c.__)("Select room","onlyoffice-docspace-plugin"),"data-mode":"room-selector",onClick:k},(0,c.__)("Select room","onlyoffice-docspace-plugin")),(0,t.createElement)(a.Button,{variant:"primary","data-title":(0,c.__)("Select file","onlyoffice-docspace-plugin"),"data-mode":"file-selector",onClick:k},(0,c.__)("Select file","onlyoffice-docspace-plugin")))):(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n.InspectorControls,{key:"setting"},(0,t.createElement)(a.PanelBody,{title:(0,c.__)("Settings","onlyoffice-docspace-plugin")},b?(0,t.createElement)(n.HeightControl,{label:(0,c.__)("Width","onlyoffice-docspace-plugin"),value:e.width,onChange:e=>l({width:e})}):"",(0,t.createElement)(n.HeightControl,{label:(0,c.__)("Height","onlyoffice-docspace-plugin"),value:e.height,onChange:e=>l({height:e})}),(0,t.createElement)(a.SelectControl,{label:(0,c.__)("Theme","onlyoffice-docspace-plugin"),value:e.theme,options:E,onChange:e=>{l({theme:e})}}))),(0,t.createElement)("div",{className:`wp-block-onlyoffice-docspace-wordpress-onlyoffice-docspace__editor ${x}`},(0,t.createElement)("tbody",null,(0,t.createElement)("tr",null,(0,t.createElement)("td",{valign:"middle"},(0,t.createElement)("div",{class:"entity-icon"},e.icon&&!w?(0,t.createElement)("img",{src:wp.oodsp.getAbsoluteUrl(e.icon),onError:()=>{y(!0)}}):(0,t.createElement)(t.Fragment,null,B))),(0,t.createElement)("td",{class:"entity-info"},(0,t.createElement)("p",{class:"entity-info-label"},"Docspace ",S," ",F),(0,t.createElement)("p",null,(0,t.createElement)("span",{style:{fontWeight:500}},(0,c.__)("Name"),":")," ",e.name||""))))),(0,t.createElement)(n.BlockControls,null,(0,t.createElement)(a.ToolbarGroup,null,(0,t.createElement)(a.Dropdown,{popoverProps:{variant:"toolbar"},renderToggle:({isOpenDropdown:e,onToggle:l})=>(0,t.createElement)(a.ToolbarButton,{"aria-expanded":e,"aria-haspopup":"true",onClick:l},(0,c.__)("Replace","onlyoffice-docspace-plugin")),renderContent:({onClose:e})=>(0,t.createElement)(t.Fragment,null,(0,t.createElement)(a.NavigableMenu,null,(0,t.createElement)(a.MenuItem,{onClick:t=>{t.target.dataset.title=(0,c.__)("Select room","onlyoffice-docspace-plugin"),t.target.dataset.mode="room-selector",k(t),e()}},(0,c.__)("Room","onlyoffice-docspace-plugin")),(0,t.createElement)(a.MenuItem,{onClick:t=>{t.target.dataset.title=(0,c.__)("Select file","onlyoffice-docspace-plugin"),t.target.dataset.mode="file-selector",k(t),e()}},(0,c.__)("File","onlyoffice-docspace-plugin"))))})))),o&&(0,t.createElement)(a.Modal,{onRequestClose:e=>{"onBlur"!=e._reactName&&(f(!1),DocSpace&&DocSpace.SDK.frames["oodsp-selector-frame"].destroyFrame())},title:g.title},(0,t.createElement)("div",{class:"oodsp-selector-frame-modal"},(0,t.createElement)("div",{id:"oodsp-selector-frame"}))))},save:({attributes:e})=>{if(!e.roomId&&!e.fileId)return"";let l="";return e.hasOwnProperty("roomId")?l+="roomId="+e.roomId+" ":e.hasOwnProperty("fileId")&&(l+="fileId="+e.fileId+" "),e.hasOwnProperty("width")&&e.width.length>0&&(l+="width="+e.width+" "),e.hasOwnProperty("height")&&e.height.length>0&&(l+="height="+e.height+" "),e.hasOwnProperty("align")&&e.align.length>0&&(l+="align="+e.align+" "),e.hasOwnProperty("theme")&&e.theme.length>0&&(l+="theme="+e.theme+" "),e.hasOwnProperty("requestToken")&&e.requestToken.length>0&&(l+="requestToken="+e.requestToken+" "),(0,t.createElement)(r.RawHTML,null,`[onlyoffice-docspace ${l} /]`)}})})();